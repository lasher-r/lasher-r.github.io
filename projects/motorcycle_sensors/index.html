<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">
    <meta name="color-scheme" content="light dark">

    

    <meta name="author" content="Richard Lasher">
    <meta name="description" content="Background    My dad is rebuilding a 1920 Indian Scout motorcycle.
The problem is that it has no speedometer, odometer, or temperature guages and I need to build them.
Basics    I&rsquo;m using a Metro Mini 328 as the brains. And a METRO 328 for building. The full size is nice because I have a couple each mounted to a breadboard and one with an oled display.">
    <meta name="keywords" content="">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Motorcycle_sensors"/>
<meta name="twitter:description" content="Background    My dad is rebuilding a 1920 Indian Scout motorcycle.
The problem is that it has no speedometer, odometer, or temperature guages and I need to build them.
Basics    I&rsquo;m using a Metro Mini 328 as the brains. And a METRO 328 for building. The full size is nice because I have a couple each mounted to a breadboard and one with an oled display."/>

    <meta property="og:title" content="Motorcycle_sensors" />
<meta property="og:description" content="Background    My dad is rebuilding a 1920 Indian Scout motorcycle.
The problem is that it has no speedometer, odometer, or temperature guages and I need to build them.
Basics    I&rsquo;m using a Metro Mini 328 as the brains. And a METRO 328 for building. The full size is nice because I have a couple each mounted to a breadboard and one with an oled display." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lasher.dev/projects/motorcycle_sensors/" />
<meta property="article:published_time" content="2021-04-09T17:44:26-06:00" />
<meta property="article:modified_time" content="2021-04-09T17:44:26-06:00" /><meta property="og:site_name" content="Lasher.dev" />


    <title>
  Motorcycle_sensors · Lasher.dev
</title>

    
      <link rel="canonical" href="https://lasher.dev/projects/motorcycle_sensors/">
    

    <link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.1.7" as="font" type="font/woff2" crossorigin>

    
      
      
      <link rel="stylesheet" href="/css/coder.min.9626fd4842064ea418d8e4060bddb5686db78f27a22297cd3731f59730faf1e5.css" integrity="sha256-lib9SEIGTqQY2OQGC921aG23jyeiIpfNNzH1lzD68eU=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="/css/coder-dark.min.dde8a61eb31a32353b4baf3d9113f03c4ea2a8ca9bb736f59ca2d2b2cb664f0b.css" integrity="sha256-3eimHrMaMjU7S689kRPwPE6iqMqbtzb1nKLSsstmTws=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

    

    <meta name="generator" content="Hugo 0.79.0" />
  </head>

  
  
    
  
  <body class="preload-transitions colorscheme-dark"
        onload=""
  >
    
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Lasher.dev
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/bookshelf">Bookshelf</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/trips/">Trips</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="https://www.lasher.dev//docs/Richard_Lasher_resume.pdf">Resume</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container page">
  <article>
    <header>
      <h1 class="title">
        <a class="title-link" href="https://lasher.dev/projects/motorcycle_sensors/">
          Motorcycle_sensors
        </a>
      </h1>
    </header>

    <h2 id="background">
  Background
  <a class="heading-link" href="#background">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>My dad is rebuilding a 1920 Indian Scout motorcycle.</p>
<p>The problem is that it has no speedometer, odometer, or temperature guages and I need to build them.</p>
<h2 id="basics">
  Basics
  <a class="heading-link" href="#basics">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>I&rsquo;m using a <a href="https://www.adafruit.com/product/2590">Metro Mini 328</a> as the brains.  And a <a href="https://www.adafruit.com/product/2488">METRO 328</a> for building.  The full size is nice because I have a couple each mounted to a breadboard and one with an oled display.</p>
<h2 id="housing">
  Housing
  <a class="heading-link" href="#housing">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>The first step is to make a duplicate of the dash itself.  We only have one and needed a duplicate so that I could assemble the internal parts in a way that fits.  A few hours of Fusion 360 later and a couple of 3D prints with tweaking in between and we had a pretty good model of the dash.  It was useful to print the part with supports and carefully remove them in one piece.  The supports could then be put into the original to compare the printed dash with the real one.</p>
<h2 id="speedometer">
  Speedometer
  <a class="heading-link" href="#speedometer">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<figure>
    <img src="/images/speed_schem.png" height="350"/> 
</figure>

<p>The speedometer/odometer wiring is relatively simple.  Magnets on the wheel will trigger a reed switch and a button can be used to reset the odometer.  The reed switch and button are connected to 5 volts on one end and an input pin on the other.  The input is pulled down.</p>
<p>The code is a little more complex.  I Started with <a href="https://www.instructables.com/Arduino-Bike-Speedometer/">this example</a> by amandaghassaei on instructables.  I rewrote the code to be a little more clear in my opinion and to add the odometer and reset button as well as an oled display.  I also fixed a bug that happened when the wheel would stop in a way where the magnet was pulling the reed switch close.</p>
<p>A function is called as an interrupt every millisecond that polls the reed switch.  It it&rsquo;s open it adds one millisecond to a variable used to time a rotation.  If it is open it counts that as one rotation and calculates mph and adds to the odometer.</p>
<p><a href="https://github.com/lasher-r/motosense2">code</a></p>
<h2 id="noise">
  Noise
  <a class="heading-link" href="#noise">
    <i class="fa fa-link" aria-hidden="true"></i>
  </a>
</h2>
<p>Because this is an automotive project there&rsquo;s going to be a lot of EMI noise.  We&rsquo;ll need to take precautions against this.  I&rsquo;m using <a href="http://www.tonywilk.co.uk/static/static1.shtml">this post</a> as a guide.  Unfortunately the guide is incomplete, I&rsquo;ll be relaying on other makers for help.</p>
<p>Build coming soon.</p>

  </article>
</section>

  

      </div>

      
  <footer class="footer">
    <section class="container">
      
      
        ©
        
          2019 -
        
        2021
         Richard Lasher 
      
      
      
    </section>
  </footer>


    </main>

    
      
      <script src="/js/coder.min.f92783b4545b68f3523e5d6ad91d93f76818f9d0db2ffa13bda31b6119cde62b.js" integrity="sha256-&#43;SeDtFRbaPNSPl1q2R2T92gY&#43;dDbL/oTvaMbYRnN5is="></script>
    

    

    

    

    

    

    

    

    
  </body>

</html>
